(this.webpackJsonpsubstitute=this.webpackJsonpsubstitute||[]).push([[0],{105:function(e,t){},107:function(e,t){},114:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(1),o=n.n(i),c=n(30),s=(n(71),n(4)),a=n(5),u={blue:"rgb(98,135,161)",black:"black",white:"white",dark:"#111111",darkBlue:"#0a6bab",lightGray:"#CCCCCC",veryLightGray:"#DDDDDD",red:"red"},l={palette:u,colors:{foreground:u.lightGray,background:u.dark},elementSizes:{icon:44,scrubbar:30,scrubCursor:2,content:800,logo:150,screenshot:500},spacings:{xxs:1,xs:2,s:5,m:10,ml:20,l:50,xl:100,xxl:250},lineHeight:1.5,fontSizes:{xxs:10,xs:12,s:14,m:16,ml:20,l:24,xl:32,xxl:48},fontWeights:{normal:"normal",bold:"bold",lighter:"lighter"},breakpoints:{mobileM:750,mobileS:350}},d=Object(a.a)(Object(a.a)({},l),{},{colors:{background:u.veryLightGray,foreground:u.dark}}),h=Object(a.a)(Object(a.a)({},l),{},{colors:{foreground:u.lightGray,background:u.dark}}),b=function(e,t){return t&&"".concat(e.spacings[t],"px")},f=n(50),j=f.default,g=f.ThemeProvider,v=f.useTheme,O=Object(i.createContext)(l),m=function(e){var t=e.children,n=e.theme;return Object(r.jsx)(O.Provider,{value:n,children:Object(r.jsx)(g,{theme:n,children:t})})};function x(e,t){for(var n=0,r=e.length;n<r;){var i=Math.floor((r+n)/2);t(e[i])?r=i:n=i+1}return n}var p=function(e){return Math.abs(e)<10?"0".concat(e):e.toString()},k=function(e){return{padding:b(e.theme,e.padding),paddingTop:b(e.theme,e.verticalPadding),paddingBottom:b(e.theme,e.verticalPadding),paddingLeft:b(e.theme,e.horizontalPadding),paddingRight:b(e.theme,e.horizontalPadding),margin:b(e.theme,e.margin),marginLeft:b(e.theme,e.horizontalMargin),marginRight:b(e.theme,e.horizontalMargin),marginTop:b(e.theme,e.verticalMargin),marginBottom:b(e.theme,e.verticalMargin),rowGap:b(e.theme,e.rowGap),columnGap:b(e.theme,e.columnGap)}},y=function(e,t,n,r){return"rgba(0,0,0,".concat(n,") 0px ").concat(b(r,e)," ").concat(b(r,t))},S=j("span")((function(e){var t,n;return[k(e),{fontWeight:e.theme.fontWeights[null!==(t=e.fontWeight)&&void 0!==t?t:"normal"],color:e.theme.colors.foreground,fontSize:e.theme.fontSizes[null!==(n=e.fontSize)&&void 0!==n?n:"m"],lineHeight:e.theme.lineHeight}]})),w=j("span")((function(e){return{fontWeight:e.theme.fontWeights.bold}})),C=j("span")((function(e){return{fontFamily:"monospace"}})),E=(j(S)((function(e){var t,n,r;return{textShadow:y(null!==(t=e.shadowOffset)&&void 0!==t?t:"xs",null!==(n=e.shadowSpread)&&void 0!==n?n:"xs",null!==(r=e.shadowOpacity)&&void 0!==r?r:.5,e.theme)}})),n(54)),z=n(55),R=(n(65),function(e){var t,n=!0;return t=requestAnimationFrame((function r(){n&&(e(),t=requestAnimationFrame(r))})),function(){n=!1,cancelAnimationFrame(t)}}),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(E.a)(this,e),this.t0=t,this.v=n,this.t=void 0,this.running=!1,this.stopCallback=void 0,this.observers=new Set,this.t=t}return Object(z.a)(e,[{key:"broadcast",value:function(){var e=this.t;this.observers.forEach((function(t){return t(e)}))}},{key:"start",value:function(){var e=this;if(!this.running){this.running=!0;var t=Date.now();this.stopCallback=R((function(){e.t=(Date.now()-t)*e.v+e.t0,e.broadcast()}))}}},{key:"pause",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=this.stopCallback)||void 0===e||e.call(this),this.stopCallback=void 0,this.running=!1,this.t0=this.t,t&&this.broadcast()}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.v;this.t=e,this.v=t,this.running?(this.pause(!1),this.start()):(this.t0=e,this.broadcast())}},{key:"observe",value:function(e){var t=this;return this.observers.add(e),function(){t.observers.delete(e)}}}]),e}(),A=Object(i.createContext)(new D),L=A.Provider,M=function(){return Object(i.useContext)(A)},N=Object(i.memo)((function(){var e=M(),t=Object(i.useState)(e.t),n=Object(s.a)(t,2),o=n[0],c=n[1];return Object(i.useEffect)((function(){return e.observe((function(e){return c(Math.floor(e/1e3))}))}),[e]),Object(r.jsx)(S,{fontSize:"m",children:Object(r.jsxs)(C,{children:[p(Math.floor(o/3600)),":",p(Math.floor(o/60%60)),":",p(Math.floor(o%60))]})})})),T=n(56),I=j("div")((function(e){return Object(a.a)(Object(a.a)({},k(e)),{},{display:"flex",flexDirection:"column"})})),G=j(I)((function(e){return{backgroundColor:e.theme.colors.background,borderRadius:b(e.theme,e.borderRadius),overflow:"hidden"}})),W=(j(G)((function(e){var t,n,r;return{boxShadow:y(null!==(t=e.shadowOffset)&&void 0!==t?t:"xs",null!==(n=e.shadowSpread)&&void 0!==n?n:"xs",null!==(r=e.shadowOpacity)&&void 0!==r?r:.5,e.theme)}})),function(e){var t=e.max,n=v(),o=n.palette,c=n.elementSizes,a=M(),u=Object(i.useState)(0),l=Object(s.a)(u,2),d=l[0],h=l[1];return Object(i.useEffect)((function(){return a.observe((function(e){return h(e/t)}))}),[a,t]),Object(r.jsx)("div",{style:{position:"absolute",left:"".concat(100*d,"%"),top:0,height:"100%",width:c.scrubCursor,backgroundColor:o.red}})}),P=Object(i.memo)((function(e){var t,n,o=e.cues,c=v(),s=c.colors,a=c.elementSizes,u=null!==(t=null===(n=o[o.length-1])||void 0===n?void 0:n.end)&&void 0!==t?t:0,l=Object(i.useRef)(null),d=M(),h=Object(i.useCallback)((function(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");if(t){t.clearRect(0,0,e.width,e.height);var n=e.width/u;t.fillStyle=s.foreground;var r,i=Object(T.a)(o);try{for(i.s();!(r=i.n()).done;){var c=r.value;t.fillRect(c.start*n,0,(c.end-c.start)*n,e.height)}}catch(a){i.e(a)}finally{i.f()}}}),[o,s,u]);return Object(i.useEffect)((function(){var e=l.current;if(e){h(e);var t=function(t){if(1===t.buttons){var n=e.getBoundingClientRect(),r=(t.clientX-n.left)/e.offsetWidth;d.set(r*u)}},n=function(t){var n=e.getBoundingClientRect(),r=(t.touches[0].clientX-n.left)/e.offsetWidth;d.set(Math.min(Math.max(r,0),1)*u)},r=function(){return h(e)};return window.addEventListener("resize",r),e.addEventListener("mousemove",t),e.addEventListener("mousedown",t),e.addEventListener("touchmove",n),e.addEventListener("touchstart",n),function(){window.removeEventListener("resize",r),e.removeEventListener("mousemove",t),e.removeEventListener("mousedown",t),e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",n)}}}),[h,d,u]),Object(r.jsxs)(G,{borderRadius:"m",style:{position:"relative",width:"100%",overflow:"hidden",cursor:"pointer"},children:[Object(r.jsx)("canvas",{height:a.scrubbar,style:{display:"block"},ref:l}),Object(r.jsx)(W,{max:u})]})})),B=n(6),F=n.n(B),_=function(e,t){var n=e.foreground,r=e.background,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;switch(t){case"NONE":return{background:r,foreground:n};case"INVERT":return{background:n,foreground:r};case"DARKEN_BACKGROUND":return{foreground:n,background:F()(r).darken(.25*i).desaturate(.5*i).toString()};case"LIGHTEN_BACKGROUND":return{foreground:n,background:F()(r).lighten(.4*i).saturate(.1*i).toString()};case"MAKE_TRANSPARENT":return{foreground:F()(n).alpha(.5*i).toString(),background:F()(r).alpha(.5*i).toString()};case"INCREASE_CONTRAST":return F()(r).isDark()?{foreground:F()(n).lighten(.1).toString(),background:F()(r).darken(.1).toString()}:{foreground:F()(n).darken(i).toString(),background:F()(r).lighten(i).toString()}}},H=function(e){var t=e.children,n=e.mode,o=void 0===n?"INVERT":n,c=e.strength,s=void 0===c?1:c,u=v(),l=Object(i.useMemo)((function(){return Object(a.a)(Object(a.a)({},u),{},{colors:_(u.colors,o,s)})}),[u,o,s]);return Object(r.jsx)(m,{theme:l,children:t})},K=n(20);function U(){var e=Object(K.a)(["\n  transition: 0.25s;\n  opacity: ",";\n  pointer-events: ",";\n  :hover {\n    cursor: pointer;\n    color: ",";\n  }\n  :active {\n    transition: 0s;\n    color: ",";\n  }\n"]);return U=function(){return e},e}function V(){var e=Object(K.a)(["\n  transition: 0.25s;\n  border: none;\n  border-radius: ",";\n  outline-width: 0;\n  background-color: ",";\n  opacity: ",";\n  pointer-events: ",";\n  box-shadow: ",";\n  :hover {\n    cursor: pointer;\n    background-color: ",";\n  }\n  :active {\n    transition: 0s;\n    background-color: ",";\n  }\n"]);return V=function(){return e},e}var q=function(e){var t=F()(e);return t.isDark()?t.lighten(.1).string():t.darken(.1).string()},J=function(e){var t=F()(e);return t.isDark()?t.lighten(.25).string():t.darken(.25).string()},X=j(S).attrs({as:"button"})(V(),(function(e){return b(e.theme,"m")}),(function(e){return e.theme.colors.background}),(function(e){return e.disabled?.5:1}),(function(e){return e.disabled?"none":"initial"}),(function(e){return y("xxs","xs",.5,e.theme)}),(function(e){return q(e.theme.colors.background)}),(function(e){return J(e.theme.colors.background)})),Q=j(S)(U(),(function(e){return e.disabled?.5:1}),(function(e){return e.disabled?"none":"initial"}),(function(e){return q(e.theme.colors.foreground)}),(function(e){return J(e.theme.colors.foreground)})),Y=n(15),Z=function(e){var t=e.cues,n=Object(i.useState)(""),o=Object(s.a)(n,2),c=o[0],a=o[1],u=M();return Object(i.useEffect)((function(){return u.observe((function(e){var n=t[x(t,(function(t){return e<t.end}))];a(n&&e>=n.start?n.text:"")}))}),[u,t]),Object(r.jsx)(S,{style:{textAlign:"center"},fontSize:"xxl",dangerouslySetInnerHTML:{__html:c}})},$=n(57),ee=n.n($),te=n(32),ne=j(S).attrs((function(e){var t;return{as:null!==(t=e.as)&&void 0!==t?t:"input"}}))((function(e){return{background:"transparent",border:"none",outlineWidth:0,color:e.theme.colors.foreground}})),re=function(e){var t=e.speed,n=M(),o=Object(i.useState)(!1),c=Object(s.a)(o,2),a=c[0],u=c[1],l=Object(i.useState)(""),d=Object(s.a)(l,2),h=d[0],b=d[1],f=Object(i.useState)(t),j=Object(s.a)(f,2),g=j[0],O=j[1],m=v(),x=Object(i.useRef)(null);return Object(i.useEffect)((function(){g!==t&&(O(t),u(!1))}),[g,t]),Object(i.useEffect)((function(){var e=x.current;if(e){e.style.width="".concat(e.scrollWidth,"px");var t=function(e){if("Enter"===e.key){var t=Number.parseFloat(h);isFinite(t)&&n.set(n.t,t),u(!1)}};return e.addEventListener("keyup",t),function(){return e.removeEventListener("keyup",t)}}}),[h,n]),a?Object(r.jsx)(ne,{ref:x,style:{fontFamily:"monospace",width:3*m.fontSizes.m},onChange:function(e){b(e.currentTarget.value)},value:h}):Object(r.jsx)(C,{onClick:function(){u(!0),b(t.toPrecision(4))},children:t.toPrecision(4)})},ie=j(I).attrs({verticalMargin:"m",horizontalMargin:"m"})((function(){return{paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)",paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"}})),oe=function(e){var t=e.subtitles,n=e.close,o=M(),c=Object(i.useState)(o.running),a=Object(s.a)(c,2),u=a[0],l=a[1],d=Object(i.useState)(o.v),h=Object(s.a)(d,2),b=h[0],f=h[1],j=Object(i.useState)(!1),g=Object(s.a)(j,2),v=g[0],O=g[1],m=Object(i.useState)(!1),p=Object(s.a)(m,2),k=p[0],y=p[1],C=Object(i.useRef)(),E=Object(i.useMemo)((function(){return t.filter((function(e){return"cue"===e.type})).map((function(e){return e.data}))}),[t]);Object(i.useEffect)((function(){var e=new ee.a;return document.addEventListener("click",(function t(){document.removeEventListener("click",t,!1),e.enable()}),!1),function(){e.disable()}}),[]),Object(i.useEffect)((function(){var e=E[E.length-1].end;return o.observe((function(t){l(o.running),f(o.v),o.running&&t>=e&&o.pause()}))}),[o,E]);var z=Object(i.useCallback)((function(){if(v&&u)if(C.current){var e=(o.t-C.current[1])/(Date.now()-C.current[0]);e>0&&o.set(o.t,e)}else C.current=[Date.now(),o.t];else C.current=void 0}),[v,u,o]),R=Object(i.useCallback)((function(){o.set(o.t,1),C.current=void 0,z()}),[z,o]);Object(i.useEffect)(z,[z]);var D=Object(i.useCallback)((function(){var e=o.t,t=E[Math.min(E.length-1,x(E,(function(t){return e<t.start})))];o.set(t.start),z()}),[E,o,z]),A=Object(i.useCallback)((function(){var e=o.t,t=E[Math.max(0,x(E,(function(t){return e<t.end}))-1)];o.set(t.start),z()}),[E,o,z]);return Object(i.useEffect)((function(){var e=function(e){switch(e.key){case"ArrowLeft":A();break;case"ArrowRight":D();break;case" ":o.running?o.pause():o.start()}};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[D,A,o]),Object(r.jsx)(H,{mode:k?"INCREASE_CONTRAST":"NONE",children:Object(r.jsx)(G,{style:{flex:1},children:Object(r.jsx)(ie,{style:{flex:1},children:Object(r.jsxs)(I,{style:{flex:1,minHeight:k?"100vh":void 0},children:[k?Object(r.jsx)(Q,{style:{alignSelf:"flex-end"},onClick:function(){return y(!1)},fontSize:"xl",children:Object(r.jsx)(te.b,{})}):Object(r.jsxs)(I,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Object(r.jsx)(Q,{onClick:n,fontSize:"xl",children:Object(r.jsx)(Y.a,{})}),Object(r.jsx)(Q,{onClick:A,fontSize:"xl",children:Object(r.jsx)(Y.c,{})}),Object(r.jsx)(Q,{onClick:function(){return o.running?o.pause():o.start()},fontSize:"xl",children:u?Object(r.jsx)(Y.d,{}):Object(r.jsx)(Y.e,{})}),Object(r.jsx)(Q,{onClick:D,fontSize:"xl",children:Object(r.jsx)(Y.b,{})}),Object(r.jsx)(Q,{onClick:function(){y(!0)},fontSize:"xl",children:Object(r.jsx)(te.a,{})})]}),Object(r.jsx)(I,{style:{flex:1,justifyContent:"center"},children:Object(r.jsx)(Z,{cues:E})}),!k&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(I,{verticalMargin:"m",style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(r.jsx)(N,{}),Object(r.jsxs)(I,{style:{flexDirection:"row",alignItems:"center"},columnGap:"m",children:[Object(r.jsxs)(S,{children:["Speed: ",Object(r.jsx)(re,{speed:b})]}),Object(r.jsx)(Q,{title:"Once activated, the speed will automatically be adjusted to match the current subtitle.",onClick:function(){return O(!v)},style:{textDecoration:v?void 0:"line-through"},fontSize:"s",fontWeight:v?"bold":void 0,children:"Adaptive"}),Object(r.jsx)(Q,{title:"Sets the speed to 1",onClick:R,fontSize:"s",children:Object(r.jsx)(w,{children:"Reset"})})]})]}),Object(r.jsx)(H,{mode:"DARKEN_BACKGROUND",children:Object(r.jsx)(P,{cues:E})})]})]})})})})},ce=n(58),se=n(64),ae=function(e){var t=e.children,n=e.background,i=e.foreground,o=v(),c=Object(a.a)(Object(a.a)({},o),{},{colors:Object(a.a)(Object(a.a)({},o.colors),{},{background:n?o.palette[n]:o.colors.background,foreground:i?o.palette[i]:o.colors.foreground})});return Object(r.jsx)(m,{theme:c,children:t})},ue=function(e){var t=Object(i.useState)(),n=Object(s.a)(t,2),o=n[0],c=n[1],u=Object(se.a)({onDrop:function(t){c(void 0);var n=new FileReader;n.onload=function(t){try{var n;e.onLoad(Object(ce.a)(null===(n=t.target)||void 0===n?void 0:n.result))}catch(o){c(String(o))}},n.readAsText(t[0])}}),l=u.getRootProps,d=u.getInputProps,h=u.isDragActive;return Object(r.jsxs)(I,{style:{alignItems:"center"},children:[Object(r.jsxs)("div",Object(a.a)(Object(a.a)({},l()),{},{children:[Object(r.jsx)("input",Object(a.a)({},d())),Object(r.jsx)(H,{mode:h?"INVERT":"LIGHTEN_BACKGROUND",strength:5,children:Object(r.jsx)(X,{padding:"ml",children:Object(r.jsx)(S,{children:Object(r.jsx)(w,{children:"Drop or select subtitle here"})})})})]})),Object(r.jsx)(ae,{foreground:"red",children:Object(r.jsx)(S,{margin:"m",children:o})})]})};function le(){var e=Object(K.a)(["\n  color: ",";\n  text-decoration: none;\n  transition: 0.5s;\n  :hover {\n    transition: 0.5s;\n    cursor: pointer;\n    color: ",";\n    text-decoration: none;\n  }\n  :active {\n    transition: 0s;\n    color: ",";\n  }\n"]);return le=function(){return e},e}var de=j("a")(le(),(function(e){return e.theme.colors.foreground}),(function(e){return function(e){var t=F()(e);return t.isDark()?t.lighten(.25).string():t.darken(.25).string()}(e.theme.colors.foreground)}),(function(e){return function(e){var t=F()(e);return t.isDark()?t.lighten(.5).string():t.darken(.5).string()}(e.theme.colors.foreground)})),he=n.p+"static/media/icon.6c28fcdb.svg",be=n(25),fe=n.p+"static/media/screenshot.ce0f32a9.png",je=function(e){var t=e.setSubtitles,n=e.setTheme,i=v().elementSizes;return Object(r.jsx)(G,{style:{flex:1,alignItems:"center"},children:Object(r.jsx)(ie,{style:{flex:1,zIndex:1,maxWidth:i.content},children:Object(r.jsxs)(I,{style:{flex:1,justifyContent:"space-around",alignItems:"center"},children:[Object(r.jsxs)(I,{margin:"l",style:{width:"100%",alignItems:"center"},children:[Object(r.jsx)("img",{width:i.logo,alt:"project logo",src:he}),Object(r.jsxs)(S,{style:{textAlign:"center"},padding:"ml",fontSize:"xl",children:[Object(r.jsx)(w,{children:"Subs"}),"titute"]}),Object(r.jsx)(S,{style:{textAlign:"center"},fontSize:"ml",children:"A subtitle player for the browser"})]}),Object(r.jsx)(I,{margin:"ml",children:Object(r.jsx)(ue,{onLoad:t})}),Object(r.jsx)(S,{margin:"m",style:{textAlign:"center"},fontSize:"m",children:"Using Substitute, you can watch subtitles from an external device, such as a smartphone or tablet. This is useful for the rare situations where you don't have control over the video source, or want to easily adjust subtitle timings without interrupting the movie."}),Object(r.jsx)(I,{horizontalMargin:"m",verticalMargin:"l",children:Object(r.jsx)("img",{src:fe,alt:"Screenshot of a mobile device using Substitute",style:{maxWidth:i.screenshot,width:"100%",objectFit:"contain"}})}),Object(r.jsxs)(I,{style:{alignItems:"center"},children:[Object(r.jsx)(S,{fontSize:"ml",children:Object(r.jsx)(w,{children:"Usage"})}),Object(r.jsx)(S,{verticalMargin:"m",children:Object(r.jsxs)("ol",{children:[Object(r.jsxs)("li",{children:["Select a subtitle file (e.g. from"," ",Object(r.jsx)(de,{href:"https://www.opensubtitles.org",children:"OpenSubtitles.org"}),")"]}),Object(r.jsx)("li",{children:"Use the controls to synchronize the current subtitles with the movie"}),Object(r.jsx)("li",{children:"If necessary, adjust the speed by changing the value or choosing adaptive speed to synchronize with your changes"})]})})]}),Object(r.jsxs)(I,{style:{alignItems:"center"},children:[Object(r.jsx)(S,{fontSize:"ml",children:Object(r.jsx)(w,{children:"Theme"})}),Object(r.jsxs)(I,{style:{flexDirection:"row"},children:[Object(r.jsxs)(Q,{margin:"m",style:{textAlign:"center"},onClick:function(){return n("light")},children:[Object(r.jsx)(be.c,{}),Object(r.jsx)("br",{}),Object(r.jsx)(w,{children:"Light mode"})]}),Object(r.jsxs)(Q,{margin:"m",style:{textAlign:"center"},onClick:function(){return n("dark")},children:[Object(r.jsx)(be.b,{}),Object(r.jsx)("br",{}),Object(r.jsx)(w,{children:"Dark mode"})]})]})]}),Object(r.jsx)(Q,{verticalMargin:"l",as:"a",href:"https://github.com/thelartians/substitute",children:Object(r.jsx)(be.a,{size:i.icon})})]})})})},ge=n(63),ve=n.n(ge);var Oe=function(){var e=Object(i.useState)(),t=Object(s.a)(e,2),n=t[0],o=t[1],c=ve()("selected-theme","dark"),a=Object(s.a)(c,2),u=a[0],l=a[1],b="light"===u?d:h,f=Object(i.useMemo)((function(){return n?new D:void 0}),[n]);return Object(r.jsx)(m,{theme:b,children:n?Object(r.jsx)(L,{value:f,children:Object(r.jsx)(oe,{close:function(){return o(void 0)},subtitles:n})}):Object(r.jsx)(je,{setTheme:l,setSubtitles:o})})},me=document.getElementById("root"),xe=Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(Oe,{})});me.hasChildNodes()?Object(c.hydrate)(xe,me):Object(c.render)(xe,me)},71:function(e,t,n){},85:function(e,t){},87:function(e,t){}},[[114,1,2]]]);
//# sourceMappingURL=main.22d0a19b.chunk.js.map